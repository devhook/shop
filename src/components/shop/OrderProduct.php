<?php namespace Devhook\Shop;

use \Model;
// use DB;
// use URL;

class OrderProduct extends Model
{

	//--------------------------------------------------------------------------

	protected $table = 'order_products';

	//--------------------------------------------------------------------------

	protected function initFields()
	{
		return array(
			'id' => array('db' => 'increments'),

			'title' => array(
				'label' => 'Название',
				'rules' => 'required',
				'field' => 'text',
			),

			'color' => array(
				'label' => 'Цвет статуса',
				'field' => 'text',
			),
		);
	}

	/***************************************************************************
		RELATIONS
	***************************************************************************/

	public function product()
	{
		return $this->belongsTo('Product');
	}

	/***************************************************************************
		STATIC API:
	***************************************************************************/





	/***************************************************************************
		OBJECT API:
	***************************************************************************/


	/***************************************************************************
		ACCESSOR & MUTATOR
	***************************************************************************/

	public function getTitleAttribute()
	{
		return $this->name;
	}

	//--------------------------------------------------------------------------

	public function getTotalPriceAttribute()
	{
		if ( ! $this->qty) {
			$this->qty = 1;
		}

		return $this->price * $this->qty;
	}

	//--------------------------------------------------------------------------
}
